<h1 id="otp">کد یکبارمصرف</h1>
از این سرویس برای تولید و دریافت کدیکبارمصرف استفاده خواهد شد.

## درخواست کد یکبارمصرف


* **درخواست:** `GET /otp/request`
* **محدودیت فراخوانی:** 2 درخواست در دقیقه
* **محدودیت فراخوانی:** 60 درخواست در ساعت

>نمونه درخواست:

```shell
curl GET 'https://api.nobitex.ir/otp/request' \
-H 'Authorization: Token yourTOKENhereHEX0000000000'
```


> در صورت فراخوانی درست، پاسخ به این صورت خواهد بود:

```json
{
    "status": "ok"
}
```


> در صورتی که بیشتر از rate مشخص شده درخواست ارسال شود:

```json
{
  "status": "failed", 
  "code": "TooManyRequests"
}
```

> درصورتی که type=phone و کاربر تلفن معتبری ثبت نکرده باشد:

```json
{
  "status": "failed", 
  "code": "PhoneValidationError", 
  "message": "Invalid phone number"
}
```



### پارامترهای ورودی

پارامتر | نوع        | پیش‌فرض | توضیحات                           | نمونه
------- |------------|---------|-----------------------------------| ---------
type    | string     | الزامی  | نوع رمز یکبارمصرف (طریقه‌ی ارسال) | `mobile`
usage   | number     | اختیاری | منظور استفاده                     | 2


### انواع رمز یکبارمصرف (type) 

نوع | توضیحات                           
------- |-----------------------------------
mobile  | ارسال از طریق پیامک به شماره همراه کاربر 
email   |ارسال به آدرس ایمیل کاربر 
phone   | ارسال از طریق پیام صوتی به تلفن ثابت 


### انواع موارد استفاده (usage) 

مورد استفاده | توضیحات                           
--------------------|-----------------------------------
tfa_removal         | حذف دوعاملی 
email-verification  |تایید ایمیل 
generic             | عمومی (پیشفرض) 
change_phone_number | تغییر تلفن همراه 
welcome_sms         | پیام خوش آمدگویی 
anti_phishing_code  | ثبت یا تغییر آنتی فیشینگ کد 



